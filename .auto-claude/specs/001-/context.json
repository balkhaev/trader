{
  "task_description": "Enhance news analysis integration for agent input system - increase update frequency and enrich news data provided to agents",
  "scoped_services": ["server"],
  "files_to_modify": {
    "server": [
      "apps/server/src/services/agent/executor/types.ts",
      "apps/server/src/services/agent/executor/context-builder.service.ts",
      "apps/server/src/services/agent/executor.service.ts",
      "apps/server/src/services/news/scheduler.ts",
      "apps/server/src/services/news/realtime/event-emitter.ts"
    ]
  },
  "files_to_reference": [
    "apps/server/src/services/agent/executor/types.ts",
    "apps/server/src/services/agent/executor/context-builder.service.ts",
    "apps/server/src/services/news/scheduler.ts",
    "apps/server/src/services/news/realtime/event-emitter.ts",
    "apps/server/src/services/news/deduplication.service.ts",
    "packages/db/src/schema/news.ts"
  ],
  "patterns": {
    "context_builder_pattern": "Check if data source enabled in strategy, use Promise.all for parallel fetching, return undefined if not applicable",
    "event_emitter_pattern": "Use typed event names ('event:type'), include relevant context in payload, provide emitX/onX method pairs",
    "scheduler_pattern": "Use setInterval with constants, handle errors gracefully with try/catch, log state changes with structured data",
    "data_access_pattern": "Use deduplicationService.listCanonical() for deduplicated stories, newsRepository for raw articles"
  },
  "existing_implementations": {
    "news_scheduler": {
      "location": "apps/server/src/services/news/scheduler.ts",
      "current_interval": "5 minutes (FETCH_INTERVAL)",
      "auto_starts": true,
      "features": ["RSS polling", "LLM analysis", "tag extraction", "anomaly detection"]
    },
    "context_builder": {
      "location": "apps/server/src/services/agent/executor/context-builder.service.ts",
      "current_news_context": "headlines and sentiment only",
      "data_source": "deduplicationService.listCanonical() or raw newsRepository"
    },
    "event_emitter": {
      "location": "apps/server/src/services/news/realtime/event-emitter.ts",
      "existing_events": ["article:new", "article:saved", "source:connected", "source:disconnected", "source:error"]
    },
    "database_schema": {
      "location": "packages/db/src/schema/news.ts",
      "available_analysis_fields": ["keyPoints", "affectedAssets", "recommendation", "sentiment", "sentimentScore", "impactScore", "marketImplications"]
    }
  },
  "created_at": "2026-01-07T17:16:14.227174",
  "updated_at": "2026-01-07T17:30:00.000000"
}
