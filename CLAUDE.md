# CLAUDE.md

–ö—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞ –¥–ª—è AI –∞–≥–µ–Ω—Ç–æ–≤. –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ [AGENTS.md](./AGENTS.md).

## üöÄ Trader 2.0

**–ù–æ–≤–æ–µ –≤–∏–¥–µ–Ω–∏–µ:** Agent Platform + Prediction Factory

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ "–Ω–∞–Ω–∏–º–∞—é—Ç" –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö AI-–∞–≥–µ–Ω—Ç–æ–≤
- AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç prediction markets –∏–∑ –Ω–æ–≤–æ—Å—Ç–µ–π
- –ê–≥–µ–Ω—Ç—ã —Ç–æ—Ä–≥—É—é—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –±–∏—Ä–∂–∞—Ö –∏ prediction markets

üìã **–ü–ª–∞–Ω—ã**: [docs/vision-2025.md](docs/vision-2025.md) | [docs/implementation-checklist.md](docs/implementation-checklist.md)

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
bun dev              # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (web:3001 + server)
bun check            # Biome lint + format
bun check-types      # TypeScript –ø—Ä–æ–≤–µ—Ä–∫–∞
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

| App | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| `apps/web` | Next.js 16, React 19, –ø–æ—Ä—Ç 3001 |
| `apps/server` | Hono API –Ω–∞ Bun |
| `apps/lean` | QuantConnect Lean (Python) |

| Package | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `@trader/db` | Drizzle ORM + PostgreSQL |
| `@trader/auth` | better-auth |
| `@trader/env` | –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ env |

## –°–µ—Ä–≤–∏—Å—ã (apps/server/src/services/)

### Trader 2.0 (NEW)

| –°–µ—Ä–≤–∏—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| `agent/` | –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ –∞–≥–µ–Ω—Ç—ã + executor |
| `prediction-market/` | Prediction markets + AMM + AI –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä |

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

| –°–µ—Ä–≤–∏—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| `market/` | –ú—É–ª—å—Ç–∏—Ä—ã–Ω–æ—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (Binance, Yahoo, MOEX) |
| `transport/` | –ê–Ω–∞–ª–∏–∑ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ ‚Üí —Å—ã—Ä—å–µ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã |
| `news/` | –°–±–æ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π (RSS, Telegram, web) |
| `trends/` | –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤ —á–µ—Ä–µ–∑ LLM |
| `signals/` | –¢–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã |
| `llm/` | OpenAI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
| `exchange/` | –ë–∏—Ä–∂–∏ (Bybit) |

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
bun db:push          # –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ö–µ–º—É
bun db:studio        # Drizzle Studio
```

–°—Ö–µ–º—ã: `packages/db/src/schema/` ‚Äî agent, prediction-market, market, transport, news, polymarket, exchange, lean

## –ü—Ä–∞–≤–∏–ª–∞ –∫–æ–¥–∞

- –Ø–≤–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ó–∞–ø—Ä–µ—â—ë–Ω `any` (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã)
- Arrow functions –¥–ª—è callbacks
- `for...of` –≤–º–µ—Å—Ç–æ `.forEach()`
- –ë–µ–∑ console.log –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

## –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏—á

–ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –Ω–æ–≤–æ–π —Ñ–∏—á–∏:

1. **–°–æ–∑–¥–∞—Ç—å –¥–æ–∫** –≤ `docs/temp/` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ñ–∏—á–∏
2. **–ö–æ–≥–¥–∞ docs/temp > 3 —Ñ–∞–π–ª–æ–≤** ‚Äî —Å—É–º–º–∞—Ä–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –æ—Å–Ω–æ–≤–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (AGENTS.md, docs/)
3. –ü–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ ‚Äî —É–¥–∞–ª–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–∫–∏

## –í–∞–∂–Ω–æ

- **–õ–æ–≥–∏**: `/logs/` (analyzer.log, historian.log, listener.log, screener.log)
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: ClickHouse, PostgreSQL, NATS –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
- **Hot reload**: –Ω–µ —É–±–∏–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã, –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–§—Ä–æ–Ω—Ç ‚Üí —Å–µ—Ä–≤–µ—Ä**: web –æ–±—â–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å server, –æ—Å—Ç–∞–ª—å–Ω–æ–µ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è
